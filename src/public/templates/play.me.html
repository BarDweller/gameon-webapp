<header>
  <div class="room-icon-container"><a ui-sref="play.room" title="Back to room"><i class="fa fa-cube fa-fw"></i></a>
  </div>
  <div class="title"><a><i class="fa fa-user fa-fw"></i> Edit profile</a></div>
</header>

<div class="viewport">
  <div class="container profile">
    <div class="padded row operations">
      <div class="one-half column">
        <a class="button u-full-width" ng-click="play.restart()"><i class="fa fa-undo"></i> Restart</a>
      </div>
      <div class="one-half column">
        <a class="button u-full-width" ng-click="play.logout()"><i class="fa fa-sign-out"></i> Log out</a>
      </div>
    </div>
    <div class="padded row">
      <h4>Update profile</h4>
    </div>
    <form name="play.profileForm" ng-submit="play.updateProfile()">
      <profile-core user="play.user" form="play.profileForm"></profile-core>
      <div class="row">
        <div class="center">
          <button type="submit" class="button" id="submit">
            <i class="fa fa-floppy-o"></i> Done
          </button>
        </div>
      </div>
    </form>
    <div class="padded row">
      <h4>Shared secret (Room registration)</h4>
    </div>
    <form name="play.sharedsecretForm" ng-submit="play.updateSharedSecret()">
      <div class="padded row">
        <div class="one-half column">
          <label for="id">Game On! Id</label>
          <div id="id">{{play.user.profile._id}}</div>
        </div>
        <div class="one-half column">
          <label for="sharedSecret">Shared Secret</label>
          <div id="sharedSecret">{{play.user.profile.credentials.sharedSecret}}</div>
        </div>
      </div>
      <div class="padded row">
        <div class="center">
          <button type="submit" id="submit">
            <i class="fa fa-key"></i>Regenerate Shared Secret
          </button>
        </div>
      </div>
    </form>
    <div class="padded row">
      <h4>API key (JWT)</h4>
    </div>
    <div class="row">
      Use the following key to experiment with authenticated API calls <a href="https://game-on.org/swagger/">using Swagger</a>.
    </div>
    <div class="row">
        <div class="eleven columns little-text" style="word-wrap: break-word;"><div id="jwt" ng-bind="play.auth.token()"></div></div>
    </div>

    <div class="row" ng-controller="sitesCtrl as sites" ng-model="activeSiteId">
      <h4>Work with your room(s)</h4>
      <form name="play.roomConfig">
        <label>Registered rooms :
          <span  class="nullable">
            <select class="form-control" ng-model="activeSiteId" ng-change="reset()" ng-style="optionStyle">
              <option value=""> -- create new room -- </option>
              <option ng-selected="{{site._id  == activeSiteId}}"
                      ng-repeat="site in sites"
                      value="{{site._id}}">
                {{site.info.name}}
              </option>
            </select>
          </span>
        </label>
      </form>
      <div class="container">
        <button type="button" class="btn" ng-model="activeSite" ng-click="play.map.update(activeSite._id)" ng-show="activeSite._id">Update</button>
        <button type="button" class="btn" ng-model="activeSite"   ng-click="play.map.add()" ng-show="!activeSite._id">Create</button>
        <button type="button" class="btn" ng-model="activeSite"  ng-click="play.map.remove(activeSite._id)" ng-show="activeSite._id">Delete</button>
      </div>
      <tab-container>
        <tab-content title="Overview">
          Your room id is <input type="text" id="roomInfo_id" class="form-control"
              placeholder="The id for your room assigned by the map service" readonly ng-model="activeSite._id"/>
        </tab-content>
        <tab-content title="Room">
          <table class='table table-striped table-bordered table-condensed'>
           <tr>
             <th>Name</th>
              <td><input type="text" id="roomInfo_name" class="form-control"
              placeholder="The name of your room, make it short and unique" ng-model="activeSite.info.name"/></td>
            </tr>
            <tr>
             <th>Full Name</th>
             <td><input type="text" id="roomInfo_fullName" class="form-control"
             placeholder="Full name for your room"/ ng-model="activeSite.info.fullName"></td>
           </tr>
           <tr>
             <th>Description</th>
              <td><textarea id="roomInfo_description" class="form-control" rows="3"
              placeholder="Detailed description of what your room does" ng-model="activeSite.info.description"></textarea></td>
            </tr>
         </table>
        </tab-content>
        <tab-content title="Exits">
          <p>Door descriptions are used by Game On! when displaying exits to a player.</p>
          <table class='table table-striped table-bordered table-condensed'>
            <tr>
              <th>Up</th>
              <td><input type="text" id="roomInfo_u" class="form-control"
              placeholder="" ng-model="activeSite.info.doors.u"/></td>
            </tr>
            <tr>
              <th>Down</th>
              <td><input type="text" id="roomInfo_d" class="form-control"
              placeholder="" ng-model="activeSite.info.doors.d"/></td>
            </tr>
            <tr>
              <th>North</th>
              <td><input type="text" id="roomInfo_n" class="form-control"
              placeholder="" ng-model="activeSite.info.doors.n"/></td>
            </tr>
            <tr>
              <th>East</th>
              <td><input type="text" id="roomInfo_e" class="form-control"
              placeholder="" ng-model="activeSite.info.doors.e"/></td>
            </tr>
            <tr>
              <th>South</th>
              <td><input type="text" id="roomInfo_s" class="form-control"
              placeholder="" ng-model="activeSite.info.doors.s"/></td>
            </tr>
            <tr>
              <th>West</th>
              <td><input type="text" id="roomInfo_w" class="form-control"
              placeholder="" ng-model="activeSite.info.doors.w"/></td>
            </tr>
          </table>
        </tab-content>
        <tab-content title="Connection">
          <table class='table table-striped table-bordered table-condensed'>
            <tr>
              <th>Type</th>
              <td>
                <div class="radio">
              <label><input type="radio" name="roomInfo_type" checked>Websocket</label>
            </td>
          </tr>
          <tr>
            <th>Target</th>
                  <td><input type="text" id="roomInfo_target" class="form-control"
                  placeholder="The websocket end point"/></td>
            </tr>
          </table>
        </tab-content>
      </tabContainer>
    </div>
  </div>
</div>
